[gd_scene load_steps=10 format=3 uid="uid://db1veptgw23ou"]

[ext_resource type="PackedScene" uid="uid://d1j3fk5boan6r" path="res://objects/board.tscn" id="1_m63bi"]
[ext_resource type="Script" path="res://scripts/Camera.gd" id="2_s7kya"]
[ext_resource type="Shader" path="res://shaders/outline-v4.gdshader" id="3_hckn8"]
[ext_resource type="Script" path="res://scripts/Hud.gd" id="4_fggok"]
[ext_resource type="Theme" uid="uid://dmnjjokglxxpx" path="res://themes/main_theme.tres" id="4_srukf"]
[ext_resource type="Texture2D" uid="uid://7lb4wkecq7l7" path="res://images/button_texture.png" id="6_xkidf"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ufyvh"]
render_priority = 0
shader = ExtResource("3_hckn8")
shader_parameter/outlineColor = Color(0, 0, 0, 0.588235)
shader_parameter/depth_threshold = 0.025
shader_parameter/normal_threshold = 0.5
shader_parameter/normal_smoothing = 0.25
shader_parameter/max_thickness = 1.3
shader_parameter/min_thickness = 0.5
shader_parameter/max_distance = 100000.0
shader_parameter/min_distance = 2.0
shader_parameter/grazing_fresnel_power = 5.0
shader_parameter/grazing_angle_mask_power = 1.0
shader_parameter/grazing_angle_modulation_factor = 50.0

[sub_resource type="QuadMesh" id="QuadMesh_4mgv0"]
material = SubResource("ShaderMaterial_ufyvh")
flip_faces = true
size = Vector2(100, 100)

[sub_resource type="Environment" id="Environment_0cqur"]
background_mode = 1
background_color = Color(0.811765, 0.811765, 0.811765, 1)
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)

[node name="Game" type="Node3D"]

[node name="World" type="Node3D" parent="."]

[node name="Board" parent="World" node_paths=PackedStringArray("camera") instance=ExtResource("1_m63bi")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000421524, 2.38419e-07, -0.0178633)
camera = NodePath("../../View")

[node name="Terrain" type="Node3D" parent="World"]

[node name="View" type="Node3D" parent="." node_paths=PackedStringArray("target") groups=["camera", "hud"]]
script = ExtResource("2_s7kya")
target = NodePath("../World/Board")

[node name="Camera" type="Camera3D" parent="View"]
projection = 1
current = true
size = 12.0

[node name="OutlineShader" type="MeshInstance3D" parent="View/Camera"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.18744)
visible = false
mesh = SubResource("QuadMesh_4mgv0")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_0cqur")

[node name="Hud" type="Control" parent="." groups=["camera"]]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("4_srukf")
script = ExtResource("4_fggok")

[node name="FlowContainer" type="FlowContainer" parent="Hud"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -31.0
grow_horizontal = 2
grow_vertical = 0

[node name="Left" type="Button" parent="Hud/FlowContainer"]
layout_mode = 2
text = "L"

[node name="Toggle" type="Button" parent="Hud/FlowContainer"]
layout_mode = 2
text = "Top Down"

[node name="Right" type="Button" parent="Hud/FlowContainer"]
layout_mode = 2
text = "R"

[node name="Pieces" type="FlowContainer" parent="Hud"]
layout_mode = 1
anchors_preset = 11
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -85.0
grow_horizontal = 0
grow_vertical = 2
alignment = 1
vertical = true

[node name="Tavern" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Tavern"

[node name="Stable" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Stable"

[node name="Inn" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Inn"

[node name="Bridge" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Bridge"

[node name="Square" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Square"

[node name="Manor" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Manor"

[node name="Abbey" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Abbey"

[node name="Academy" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Academy"

[node name="Infirmary" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Infirmary"

[node name="Castle" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Castle"

[node name="Tower" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Tower"

[node name="Cathedral" type="Button" parent="Hud/Pieces"]
layout_mode = 2
text = "Cathedral"

[node name="TextureRect" type="TextureRect" parent="Hud/Pieces"]
visible = false
layout_mode = 2
texture = ExtResource("6_xkidf")
expand_mode = 5

[node name="Sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.722363, -0.519719, 0.456161, -0.0448978, 0.623015, 0.78092, -0.690055, -0.584588, 0.426709, 13.3788, 23.4776, 11.6163)
shadow_enabled = true
shadow_blur = 0.5

[connection signal="pressed" from="Hud/FlowContainer/Left" to="Hud" method="_on_left_pressed"]
[connection signal="pressed" from="Hud/FlowContainer/Toggle" to="Hud" method="_on_toggle_pressed"]
[connection signal="pressed" from="Hud/FlowContainer/Right" to="Hud" method="_on_right_pressed"]
[connection signal="button_down" from="Hud/Pieces/Tavern" to="Hud" method="_on_tavern_button_down"]
[connection signal="button_up" from="Hud/Pieces/Tavern" to="Hud" method="_on_tavern_button_up"]
[connection signal="button_down" from="Hud/Pieces/Stable" to="Hud" method="_on_stable_button_down"]
[connection signal="button_up" from="Hud/Pieces/Stable" to="Hud" method="_on_stable_button_up"]
[connection signal="button_down" from="Hud/Pieces/Inn" to="Hud" method="_on_inn_button_down"]
[connection signal="button_up" from="Hud/Pieces/Inn" to="Hud" method="_on_inn_button_up"]
[connection signal="button_down" from="Hud/Pieces/Bridge" to="Hud" method="_on_bridge_button_down"]
[connection signal="button_up" from="Hud/Pieces/Bridge" to="Hud" method="_on_bridge_button_up"]
[connection signal="button_down" from="Hud/Pieces/Square" to="Hud" method="_on_square_button_down"]
[connection signal="button_up" from="Hud/Pieces/Square" to="Hud" method="_on_square_button_up"]
[connection signal="button_down" from="Hud/Pieces/Manor" to="Hud" method="_on_manor_button_down"]
[connection signal="button_up" from="Hud/Pieces/Manor" to="Hud" method="_on_manor_button_up"]
[connection signal="button_down" from="Hud/Pieces/Abbey" to="Hud" method="_on_abbey_button_down"]
[connection signal="button_up" from="Hud/Pieces/Abbey" to="Hud" method="_on_abbey_button_up"]
[connection signal="button_down" from="Hud/Pieces/Academy" to="Hud" method="_on_academy_button_down"]
[connection signal="button_up" from="Hud/Pieces/Academy" to="Hud" method="_on_academy_button_up"]
[connection signal="button_down" from="Hud/Pieces/Infirmary" to="Hud" method="_on_infirmary_button_down"]
[connection signal="button_up" from="Hud/Pieces/Infirmary" to="Hud" method="_on_infirmary_button_up"]
[connection signal="button_down" from="Hud/Pieces/Castle" to="Hud" method="_on_castle_button_down"]
[connection signal="button_up" from="Hud/Pieces/Castle" to="Hud" method="_on_castle_button_up"]
[connection signal="button_down" from="Hud/Pieces/Tower" to="Hud" method="_on_tower_button_down"]
[connection signal="button_up" from="Hud/Pieces/Tower" to="Hud" method="_on_tower_button_up"]
[connection signal="button_down" from="Hud/Pieces/Cathedral" to="Hud" method="_on_cathedral_button_down"]
[connection signal="button_up" from="Hud/Pieces/Cathedral" to="Hud" method="_on_cathedral_button_up"]
